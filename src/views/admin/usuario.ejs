<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head.ejs', {titulo: "Usuarios" , style: "style.css" , estilo: "usuario.css" ,
    sidebar: "sidebar.css" }) %>

    <body class="hidden">
        <!-- SIDEBAR -->
        <%- include('../partials/sidebar.ejs') %>
            <!-- CONTENT -->
            <section id="content">
                <!-- NAVBAR -->
                <%- include('../partials/header.ejs', {form_action: "#" , hidden:'hidden'}) %>
                    <!-- MAIN -->
                    <main>
                        <ul class="nav-links container">
                            <li class="upward"><a href="#" data-form="form1">Usuario</a></li>
                            <li class="center"><a href="#" data-form="form2">Docente</a></li>
                            <li class="forward"><a href="#" data-form="form3">Alumno</a></li>
                            <li class="upward"><a href="#" data-form="form4">Curso</a></li>
                            <li class="center"><a href="#" data-form="form5">Materias</a></li>
                        </ul>

                        <div class="container">
                            <!-- Formulario 1 -->
                            <form id="form1" class="form-content" style="display:none;" action="/administrador/usuario"
                                method="post">
                                <input type="hidden" name="actionType" class="actionType" value="">
                                <div class="form first">
                                    <div class="details personal">
                                        <span class="title">Crear Usuario</span>
                                        <div class="fields">
                                            <div class="input-field">
                                                <label for="nombre_usuario">Usuario</label>
                                                <input type="text" placeholder="Ingresa nombre de Usuario"
                                                    name="nombre_usuario"
                                                    value="<%= locals.old1 && old1.nombre_usuario ? old1.nombre_usuario : '' %>"
                                                    required>
                                            </div>
                                            <!--comentario para los errores-->
                                            <% if (locals.errors1 && locals.errors1.nombre_usuario) { %>
                                                <div style="color: red;">
                                                    <%= locals.errors1.nombre_usuario.msg %>
                                                </div>
                                                <% } %>

                                                    <div class="input-field">
                                                        <label for="password_usuario">Contraseña</label>
                                                        <input type="password" placeholder="Ingresa tu Contraseña"
                                                            name="password_usuario" required>
                                                    </div>

                                                    <div class="input-field">
                                                        <label for="password_usuario2">Confirma Contraseña</label>
                                                        <input type="password" placeholder="Repite tu Contraseña"
                                                            name="password_usuario2" required>
                                                    </div>

                                                    <!--comentario para los errores-->
                                                    <% if (locals.errors1 && locals.errors1.password_usuario2) { %>
                                                        <div style="color: red;">
                                                            <%= locals.errors1.password_usuario2.msg %>
                                                        </div>
                                                        <% } %>

                                                            <div class="input-field">
                                                                <label for="permisos">Rol</label>
                                                                <select name="permisos" required>
                                                                    <option disabled <%=!(locals.old1 &&
                                                                        locals.old1.permisos) ? 'selected' : '' %>
                                                                        >Selecciona Rol de Usuario</option>
                                                                    <option value="Administrador" <%=(locals.old1 &&
                                                                        locals.old1 &&
                                                                        locals.old1.nombre_rol==='administrador' )
                                                                        ? 'selected' : '' %>>Administrador</option>
                                                                    <option value="Preceptor" <%=(locals.old1 &&
                                                                        locals.old1 &&
                                                                        locals.old1.nombre_rol==='preceptor' )
                                                                        ? 'selected' : '' %>>Preceptor</option>
                                                                    <option value="Docente" <%=(locals.old1 &&
                                                                        locals.old1 &&
                                                                        locals.old1.nombre_rol==='docente' )
                                                                        ? 'selected' : '' %>>Docente</option>
                                                                    <option value="Director" <%=(locals.old1 &&
                                                                        locals.old1 &&
                                                                        locals.old1.nombre_rol==='director' )
                                                                        ? 'selected' : '' %>>Director</option>
                                                                </select>
                                                            </div>

                                                            <div class="input-field">
                                                                <label for="dni_docente">DNI</label>
                                                                <input name="dni_docente" type="text"
                                                                    placeholder="34094325"
                                                                    value="<%= locals.old1 && old1.dni_docente ? old1.dni_docente : '' %>"
                                                                    required>
                                                            </div>

                                                            <!--comentario para los errores-->
                                                            <% if (locals.errors1 && locals.errors1.dni_docente) { %>
                                                                <div style="color: red;">
                                                                    <%= locals.errors1.dni_docente.msg %>
                                                                </div>
                                                                <% } %>

                                        </div>
                                    </div>
                                    <div id="botonesEnviarModificar">
                                        <button type="submit" onclick="setActionType(this, 'crear')" class="nextBtn">
                                            <span class="btnText">Crear</span>
                                            <i class='bx bx-send'></i>
                                        </button>

                                        <button type="submit" onclick="setActionType(this, 'modificar')"
                                            class="nextBtn">
                                            <span class="btnText">Modificar</span>
                                            <i class='bx bx-edit'></i>
                                        </button>
                                    </div>
                                </div>
                            </form>

                            <!-- Formulario 2 -->
                            <form id="form2" class="form-content" style="display:none;"
                                action="/administrador/usuario/docente" method="post">
                                <input type="hidden" name="actionType" class="actionType" value="">
                                <div class="form first">
                                    <div class="details personal">
                                        <span class="title">Registrar Docente</span>
                                        <div class="fields">
                                            <div class="input-field">
                                                <label for="apellido_docente">Apellido/s</label>
                                                <input name="apellido_docente" type="text"
                                                    placeholder="Ingresa tu/s apellido/s"
                                                    value="<%= locals.old2 && old2.apellido_docente ? old2.apellido_docente : '' %>"
                                                    required>
                                            </div>
                                            <div class="input-field">
                                                <label for="nombre_docente">Nombre/s</label>
                                                <input name="nombre_docente" type="text"
                                                    placeholder="Ingresa tu/s nombre/s"
                                                    value="<%= locals.old2 && old2.nombre_docente ? old2.nombre_docente : '' %>"
                                                    required>
                                            </div>
                                            <div class="input-field">
                                                <label for="fecha_nac_docente">Fecha de Nacimiento</label>
                                                <input name="fecha_nac_docente" type="date"
                                                    placeholder="Ingresa tu fecha de nacimiento"
                                                    value="<%= locals.old2 && old2.fecha_nac_docente ? old2.fecha_nac_docente : '' %>"
                                                    required>
                                            </div>
                                            <div class="input-field">
                                                <label for="email_docente">Email</label>
                                                <input name="email_docente" type="text" placeholder="algo@algo.com"
                                                    value="<%= locals.old2 && old2.email_docente ? old2.email_docente : '' %>"
                                                    required>
                                            </div>

                                            <!--comentario para los errores-->
                                            <% if (locals.errors2 && locals.errors2.email_docente) { %>
                                                <div style="color: red;">
                                                    <%= locals.errors2.email_docente.msg %>
                                                </div>
                                                <% } %>

                                                    <div class="input-field">
                                                        <label for="celular_docente">Celular</label>
                                                        <input name="celular_docente" type="text"
                                                            placeholder="3855234345"
                                                            value="<%= locals.old2 && old2.celular_docente ? old2.celular_docente : '' %>"
                                                            required>
                                                    </div>

                                                    <!--comentario para los errores-->
                                                    <% if (locals.errors2 && locals.errors2.celular_docente) { %>
                                                        <div style="color: red;">
                                                            <%= locals.errors2.celular_docente.msg %>
                                                        </div>
                                                        <% } %>


                                                            <div class="input-field">
                                                                <label for="nombre_cargo">Cargo</label>
                                                                <select name="nombre_cargo" required>
                                                                    <option disabled <%=!(locals.old2 &&
                                                                        locals.old2.Cargo &&
                                                                        locals.old2.Cargo.nombre_cargo) ? 'selected'
                                                                        : '' %>>Selecciona Cargo</option>
                                                                    <option value="tecnico" <%=(locals.old2 &&
                                                                        locals.old2.Cargo &&
                                                                        locals.old2.Cargo.nombre_cargo==='tecnico' )
                                                                        ? 'selected' : '' %>>Técnico</option>
                                                                    <option value="director" <%=(locals.old2 &&
                                                                        locals.old2.Cargo &&
                                                                        locals.old2.Cargo.nombre_cargo==='director' )
                                                                        ? 'selected' : '' %>>Director</option>
                                                                    <option value="preceptor" <%=(locals.old2 &&
                                                                        locals.old2.Cargo &&
                                                                        locals.old2.Cargo.nombre_cargo==='preceptor' )
                                                                        ? 'selected' : '' %>>Preceptor</option>
                                                                    <option value="docente" <%=(locals.old2 &&
                                                                        locals.old2.Cargo &&
                                                                        locals.old2.Cargo.nombre_cargo==='docente' )
                                                                        ? 'selected' : '' %>>Docente</option>
                                                                </select>
                                                            </div>

                                                            <div class="input-field">
                                                                <label for="dni_docente">DNI</label>
                                                                <input name="dni_docente" type="text"
                                                                    placeholder="34094325"
                                                                    value="<%= locals.old2 && old2.dni_docente ? old2.dni_docente : '' %>"
                                                                    required>
                                                            </div>

                                                            <!--comentario para los errores-->
                                                            <% if (locals.errors2 && locals.errors2.dni_docente) { %>
                                                                <div style="color: red;">
                                                                    <%= locals.errors2.dni_docente.msg %>
                                                                </div>
                                                                <% } %>

                                                                    <div class="input-field">
                                                                        <label for="condicion">Situación</label>
                                                                        <select name="condicion" required>
                                                                            <option disabled <%=!(locals.old2 &&
                                                                                locals.old2.Situacion &&
                                                                                locals.old2.Situacion.nombre_situacion)
                                                                                ? 'selected' : '' %>>Selecciona
                                                                                Situación</option>
                                                                            <option value="Titular" <%=(locals.old2 &&
                                                                                locals.old2.Situacion &&
                                                                                locals.old2.Situacion.nombre_situacion==='Titular'
                                                                                ) ? 'selected' : '' %>>Titular</option>
                                                                            <option value="Suplente" <%=(locals.old2 &&
                                                                                locals.old2.Situacion &&
                                                                                locals.old2.Situacion.nombre_situacion==='Suplente'
                                                                                ) ? 'selected' : '' %>>Suplente</option>
                                                                            <option value="Interino" <%=(locals.old2 &&
                                                                                locals.old2.Situacion &&
                                                                                locals.old2.Situacion.nombre_situacion==='Interino'
                                                                                ) ? 'selected' : '' %>>Interino</option>
                                                                        </select>
                                                                    </div>

                                        </div>
                                    </div>
                                    <div id="botonesEnviarModificar">
                                        <button type="submit" onclick="setActionType(this, 'crear')" class="nextBtn">
                                            <span class="btnText">Crear</span>
                                            <i class='bx bx-send'></i>
                                        </button>

                                        <button type="submit" onclick="setActionType(this, 'modificar')"
                                            class="nextBtn">
                                            <span class="btnText">Modificar</span>
                                            <i class='bx bx-edit'></i>
                                        </button>
                                    </div>
                                </div>
                            </form>

                            <!-- Formulario 3 -->
                            <form id="form3" class="form-content" style="display:none;"
                                action="/administrador/usuario/alumno" method="post">
                                <input type="hidden" name="actionType" class="actionType" value="">
                                <div class="form first">
                                    <div class="details personal">
                                        <span class="title">Alumno</span>
                                        <div class="fields">
                                            <div class="input-field">
                                                <label for="apellido_alumno">Apellido/s</label>
                                                <input name="apellido_alumno" type="text"
                                                    placeholder="Ingresa tu/s apellido/s"
                                                    value="<%= locals.old3 && old3.apellido_alumno ? old3.apellido_alumno : '' %>"
                                                    required>
                                            </div>
                                            <div class="input-field">
                                                <label for="nombre_alumno">Nombre/s</label>
                                                <input name="nombre_alumno" type="text"
                                                    placeholder="Ingresa tu/s nombre/s"
                                                    value="<%= locals.old3 && old3.nombre_alumno ? old3.nombre_alumno : '' %>"
                                                    required>
                                            </div>
                                            <div class="input-field">
                                                <label for="fecha_nac_alumno">Fecha de Nacimiento</label>
                                                <input name="fecha_nac_alumno" type="date"
                                                    placeholder="Ingresa tu fecha de nacimiento"
                                                    value="<%= locals.old3 && old3.fecha_nac_alumno ? old3.fecha_nac_alumno : '' %>"
                                                    required>
                                            </div>
                                            <div class="input-field">
                                                <label for="email_alumno">Email</label>
                                                <input name="email_alumno" type="text" placeholder="algo@algo.com"
                                                    value="<%= locals.old3 && old3.email_alumno ? old3.email_alumno : '' %>"
                                                    required>
                                            </div>

                                            <!--comentario para los errores-->
                                            <% if (locals.errors3 && locals.errors3.email_alumno) { %>
                                                <div style="color: red;">
                                                    <%= locals.errors3.email_alumno.msg %>
                                                </div>
                                                <% } %>

                                                    <div class="input-field">
                                                        <label for="celular_alumno">Celular</label>
                                                        <input name="celular_alumno" type="text"
                                                            placeholder="3855234345"
                                                            value="<%= locals.old3 && old3.celular_alumno ? old3.celular_alumno : '' %>"
                                                            required>
                                                    </div>

                                                    <!--comentario para los errores-->
                                                    <% if (locals.errors3 && locals.errors3.celular_alumno) { %>
                                                        <div style="color: red;">
                                                            <%= locals.errors3.celular_alumno.msg %>
                                                        </div>
                                                        <% } %>


                                                            <div class="input-field">
                                                                <label for="direccion_alumno">Dirección/es</label>
                                                                <input name="direccion_alumno" type="text"
                                                                    placeholder="Ingresa tu/s dirección/nes"
                                                                    value="<%= locals.old3 && old3.direccion_alumno ? old3.direccion_alumno : '' %>"
                                                                    required>
                                                            </div>
                                                            <div class="input-field">
                                                                <label for="dni_alumno">DNI</label>
                                                                <input name="dni_alumno" type="text"
                                                                    placeholder="34094325"
                                                                    value="<%= locals.old3 && old3.dni_alumno ? old3.dni_alumno : '' %>"
                                                                    required>
                                                            </div>

                                                            <!--comentario para los errores-->
                                                            <% if (locals.errors3 && locals.errors3.dni_alumno) { %>
                                                                <div style="color: red;">
                                                                    <%= locals.errors3.dni_alumno.msg %>
                                                                </div>
                                                                <% } %>

                                                                    <div class="input-field">
                                                                        <label for="genero_alumno">Género</label>
                                                                        <select name="genero_alumno" required>
                                                                            <option disabled <%=!(locals.old3 &&
                                                                                locals.old3.Genero &&
                                                                                locals.old3.Genero.nombre_genero)
                                                                                ? 'selected' : '' %>>Selecciona Género
                                                                            </option>
                                                                            <option value="masculino" <%=(locals.old3 &&
                                                                                locals.old3.Genero &&
                                                                                locals.old3.Genero.nombre_genero==='masculino'
                                                                                ) ? 'selected' : '' %>>Masculino
                                                                            </option>
                                                                            <option value="femenino" <%=(locals.old3 &&
                                                                                locals.old3.Genero &&
                                                                                locals.old3.Genero.nombre_genero==='femenino'
                                                                                ) ? 'selected' : '' %>>Femenino</option>
                                                                            <option value="otro" <%=(locals.old3 &&
                                                                                locals.old3.Genero &&
                                                                                locals.old3.Genero.nombre_genero==='otro'
                                                                                ) ? 'selected' : '' %>>Otro</option>
                                                                        </select>
                                                                    </div>
                                        </div>
                                    </div>
                                    <div class="details personal">
                                        <span class="title">Tutor</span>
                                        <div class="fields">
                                            <div class="input-field">
                                                <label for="apellido_tutor">Apellido/s</label>
                                                <input name="apellido_tutor" type="text"
                                                    placeholder="Ingresa tu/s apellido/s"
                                                    value="<%= locals.old3 && locals.old3.Tutor ? locals.old3.Tutor.dataValues.apellido_tutor : '' %>">
                                            </div>

                                            <div class="input-field">
                                                <label for="nombre_tutor">Nombre/s</label>
                                                <input name="nombre_tutor" type="text"
                                                    placeholder="Ingresa tu/s nombre/s"
                                                    value="<%= locals.old3 && locals.old3.Tutor ? locals.old3.Tutor.dataValues.nombre_tutor : '' %>">
                                            </div>

                                            <div class="input-field">
                                                <label for="email_tutor">Email</label>
                                                <input name="email_tutor" type="text" placeholder="algo@algo.com"
                                                    value="<%= locals.old3 && locals.old3.Tutor ? locals.old3.Tutor.dataValues.email_tutor : '' %>">
                                            </div>

                                            <% if (locals.errors3 && locals.errors3.email_tutor) { %>
                                                <div style="color: red;">
                                                    <%= locals.errors3.email_tutor.msg %>
                                                </div>
                                                <% } %>

                                                    <div class="input-field">
                                                        <label for="celular_tutor">Celular</label>
                                                        <input name="celular_tutor" type="text" placeholder="3855234345"
                                                            value="<%= locals.old3 && locals.old3.Tutor ? locals.old3.Tutor.dataValues.celular_tutor : '' %>">
                                                    </div>

                                                    <% if (locals.errors3 && locals.errors3.celular_tutor) { %>
                                                        <div style="color: red;">
                                                            <%= locals.errors3.celular_tutor.msg %>
                                                        </div>
                                                        <% } %>

                                                            <div class="input-field">
                                                                <label for="direccion_tutor">Dirección/es</label>
                                                                <input name="direccion_tutor" type="text"
                                                                    placeholder="Ingresa tu/s dirección/nes"
                                                                    value="<%= locals.old3 && locals.old3.Tutor ? locals.old3.Tutor.dataValues.direccion_tutor : '' %>">
                                                            </div>

                                                            <div class="input-field">
                                                                <label for="dni_tutor">DNI</label>
                                                                <input name="dni_tutor" type="text"
                                                                    placeholder="34094325"
                                                                    value="<%= locals.old3 && locals.old3.Tutor ? locals.old3.Tutor.dataValues.dni_tutor : '' %>">
                                                            </div>

                                                            <% if (locals.errors3 && locals.errors3.dni_tutor) { %>
                                                                <div style="color: red;">
                                                                    <%= locals.errors3.dni_tutor.msg %>
                                                                </div>
                                                                <% } %>
                                        </div>
                                    </div>

                                    <div id="botonesEnviarModificar">
                                        <button type="submit" onclick="setActionType(this, 'crear')" class="nextBtn">
                                            <span class="btnText">Crear</span>
                                            <i class='bx bx-send'></i>
                                        </button>

                                        <button type="submit" onclick="setActionType(this, 'modificar')"
                                            class="nextBtn">
                                            <span class="btnText">Modificar</span>
                                            <i class='bx bx-edit'></i>
                                        </button>
                                    </div>

                                </div>
                            </form>

                            <!-- Formulario 4 -->
                            <form id="form4" class="form-content" style="display:none;"
                                action="/administrador/usuario/curso" method="post">
                                <input type="hidden" name="actionType" class="actionType" value="">

                                <!-- Campo oculto para enviar el idcurso cuando se modifique -->
                                <input type="hidden" name="idcurso"
                                    value="<%= locals.old4 && old4.idcurso ? old4.idcurso : '' %>">

                                <div class="form first">
                                    <div class="details personal">
                                        <span class="title">Crear Curso</span>
                                        <div class="fields">
                                            <div class="input-field">
                                                <label for="anio_curso">Año</label>
                                                <input type="text" placeholder="Ingresa Grado del curso"
                                                    name="anio_curso"
                                                    value="<%= locals.old4 && old4.anio_curso ? old4.anio_curso : '' %>"
                                                    required>
                                            </div>
                                            <% if (locals.errors4 && locals.errors4.anio_curso) { %>
                                                <div style="color: red;">
                                                    <%= locals.errors4.anio_curso.msg %>
                                                </div>
                                                <% } %>

                                                    <div class="input-field">
                                                        <label for="division_curso">División</label>
                                                        <input type="text" placeholder="Ingresa División del curso"
                                                            name="division_curso"
                                                            value="<%= locals.old4 && old4.division_curso ? old4.division_curso : '' %>"
                                                            required>
                                                    </div>
                                                    <% if (locals.errors4 && locals.errors4.division_curso) { %>
                                                        <div style="color: red;">
                                                            <%= locals.errors4.division_curso.msg %>
                                                        </div>
                                                        <% } %>

                                                            <div class="input-field">
                                                                <label for="nombre_turno">Turno</label>
                                                                <select name="nombre_turno" required>
                                                                    <option disabled <%=!(locals.old4 &&
                                                                        locals.old4.Turno &&
                                                                        locals.old4.Turno.nombre_turno) ? 'selected'
                                                                        : '' %>>Selecciona turno</option>
                                                                    <option value="mañana" <%=(locals.old4 &&
                                                                        locals.old4.Turno &&
                                                                        locals.old4.Turno.nombre_turno==='mañana' )
                                                                        ? 'selected' : '' %>>Mañana</option>
                                                                    <option value="tarde" <%=(locals.old4 &&
                                                                        locals.old4.Turno &&
                                                                        locals.old4.Turno.nombre_turno==='tarde' )
                                                                        ? 'selected' : '' %>>Tarde</option>
                                                                    <option value="noche" <%=(locals.old4 &&
                                                                        locals.old4.Turno &&
                                                                        locals.old4.Turno.nombre_turno==='noche' )
                                                                        ? 'selected' : '' %>>Noche</option>
                                                                </select>
                                                            </div>
                                        </div>
                                    </div>
                                    <div id="botonesEnviarModificar">
                                        <button type="submit" onclick="setActionType(this, 'crear')" class="nextBtn">
                                            <span class="btnText">Crear</span>
                                            <i class='bx bx-send'></i>
                                        </button>
                                        <button type="submit" onclick="setActionType(this, 'modificar')"
                                            class="nextBtn">
                                            <span class="btnText">Modificar</span>
                                            <i class='bx bx-edit'></i>
                                        </button>
                                    </div>
                                </div>
                            </form>


                            <!-- Formulario 5 -->
                            <form id="form5" class="form-content" style="display:none;"
                                action="/administrador/usuario/materia" method="post">
                                <input type="hidden" name="actionType" class="actionType" value="">
                                <div class="form first">
                                    <div class="details personal">
                                        <span class="title">Crear Materia</span>
                                        <div class="fields">
                                            <div class="input-field">
                                                <label for="nombre_materia">Nombre de la Materia</label>
                                                <input type="text" placeholder="Ingresa El nombre de la Materia"
                                                    name="nombre_materia"
                                                    value="<%= locals.old5 && old5.nombre_materia ? old5.nombre_materia : '' %>"
                                                    required>
                                            </div>
                                            <!--comentario para los errores-->
                                            <% if (locals.errors5 && locals.errors5.nombre_materia) { %>
                                                <div style="color: red;">
                                                    <%= locals.errors5.nombre_materia.msg %>
                                                </div>
                                                <% } %>

                                        </div>
                                    </div>
                                    <div id="botonesEnviarModificar">
                                        <button type="submit" onclick="setActionType(this, 'crear')" class="nextBtn">
                                            <span class="btnText">Crear</span>
                                            <i class='bx bx-send'></i>
                                        </button>

                                        <button type="submit" onclick="setActionType(this, 'modificar')"
                                            class="nextBtn">
                                            <span class="btnText">Modificar</span>
                                            <i class='bx bx-edit'></i>
                                        </button>
                                    </div>
                                </div>
                            </form>

                        </div>
                    </main>
            </section>
            <!-- Script de carga inicial -->
            <script src="/js/administrador_general/all_menues.js"></script>
            <!-- Script para mejorar la respuesta con "hide" -->
            <script src="/js/main_menues/usuario.js"></script>
            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    const activeForm = "<%= typeof activeForm !== 'undefined' ? activeForm : '' %>";
                    if (activeForm) {
                        document.getElementById(activeForm).style.display = "block";
                    }
                });
            </script>
            <script>
                function setActionType(button, action) {
                    // Encuentra el formulario más cercano al botón
                    const form = button.closest('form');

                    if (form) {
                        // Selecciona el campo actionType dentro del formulario encontrado
                        const actionTypeInput = form.querySelector('input[name="actionType"]');

                        if (actionTypeInput) {
                            // Establece el valor del campo actionType y envía el formulario
                            actionTypeInput.value = action;
                            form.submit();
                        } else {
                            console.error("Campo 'actionType' no encontrado en el formulario.");
                        }
                    } else {
                        console.error("Formulario no encontrado.");
                    }
                }

            </script>


    </body>

</html>